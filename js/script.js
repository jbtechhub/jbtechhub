document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll(".card"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("show"),t.unobserve(e.target))})},{threshold:.1});e.forEach(e=>t.observe(e)),document.querySelectorAll(".card button").forEach(e=>{e.addEventListener("click",()=>{alert("This would redirect to detailed gadget review page!")})});let l=document.querySelectorAll("nav ul li a");if(l.forEach(e=>{e.getAttribute("href")===window.location.pathname.split("/").pop()&&e.classList.add("active"),e.addEventListener("click",function(){l.forEach(e=>e.classList.remove("active")),this.classList.add("active")})}),"reviews.html"===window.location.pathname.split("/").pop()){let o=Array.from(document.querySelectorAll(".category-btn")),r=Array.from(document.querySelectorAll(".gadget-card"));function a(e){let t=e||"all";o.forEach(e=>e.classList.toggle("active",e.dataset.filter===t)),r.forEach(e=>{e.style.display="all"===t||e.dataset.category===t?"block":"none"}),function e(t,l){let o=new URL(window.location);l?o.searchParams.set(t,l):o.searchParams.delete(t),history.replaceState(null,"",o.toString())}("filter","all"===t?null:t)}let n=new URLSearchParams(window.location.search).get("filter")||"all";a(n),o.forEach(e=>{e.addEventListener("click",()=>{a(e.dataset.filter)})}),r.forEach(e=>{let t=e.querySelector("a.btn");if(t&&-1===t.href.indexOf("?")){let l=e.dataset.category||"all";t.href=`${t.href}?from=reviews.html&filter=${encodeURIComponent(l)}`}})}let c=document.getElementById("back-btn");c&&c.addEventListener("click",function(e){e.preventDefault();let t=new URLSearchParams(window.location.search),l=t.get("from"),o=t.get("filter");if(l){let r=o?`${l}?filter=${encodeURIComponent(o)}`:l;if(window.history.length>1){let a=window.location.pathname.split("/").pop();window.history.back(),setTimeout(()=>{let e=window.location.pathname.split("/").pop();e===a&&(window.location.href=r)},300)}else window.location.href=r;return}o?window.location.href=`reviews.html?filter=${encodeURIComponent(o)}`:window.location.href="reviews.html"});let s=document.getElementById("contact-form"),i=document.getElementById("form-message");s&&s.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(s),l=s.getAttribute("action");fetch(l,{method:"POST",body:t,headers:{Accept:"application/json"}}).then(e=>{e.ok?(i&&(i.innerText="Message Sent!",i.style.color="green"),s.reset()):i&&(i.innerText="Ooops! Something went wrong.",i.style.color="red")}).catch(()=>{i&&(i.innerText="Ooops! Something went wrong.",i.style.color="red")})})});const scrollToTopBtn=document.getElementById("scrollToTopBtn");scrollToTopBtn&&(window.addEventListener("scroll",()=>{window.scrollY>200?scrollToTopBtn.classList.add("show"):scrollToTopBtn.classList.remove("show")}),scrollToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));